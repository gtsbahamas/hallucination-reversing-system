{
  "task_id": "django__django-12470",
  "condition": "baseline",
  "max_iterations": 1,
  "model": "claude-sonnet-4-5-20250929",
  "final_passed": false,
  "final_test_output": {
    "resolved": false,
    "test_output": "{\n  \"patch_is_None\": false,\n  \"patch_exists\": true,\n  \"patch_successfully_applied\": true,\n  \"resolved\": false,\n  \"tests_status\": {\n    \"FAIL_TO_PASS\": {\n      \"success\": [],\n      \"failure\": [\n        \"test_inherited_ordering_pk_desc (model_inheritance.tests.ModelInheritanceTests)\"\n      ]\n    },\n    \"PASS_TO_PASS\": {\n      \"success\": [],\n      \"failure\": [\n        \"test_abstract_fk_related_name (model_inheritance.tests.InheritanceSameModelNameTests)\",\n        \"test_unique (model_inheritance.tests.InheritanceUniqueTests)\",\n        \"test_unique_together (model_inheritance.tests.InheritanceUniqueTests)\",\n        \"test_abstract (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_abstract_parent_link (model_inheritance.tests.ModelInheritanceTests)\",\n        \"Creating a child with non-abstract parents only issues INSERTs.\",\n        \"test_custompk_m2m (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_eq (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_init_subclass (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_meta_fields_and_ordering (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_mixin_init (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_model_with_distinct_accessors (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_model_with_distinct_related_query_name (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_reverse_relation_for_different_hierarchy_tree (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_set_name (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_update_parent_filtering (model_inheritance.tests.ModelInheritanceTests)\",\n        \"test_exclude_inherited_on_null (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_filter_inherited_model (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_filter_inherited_on_null (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_filter_on_parent_returns_object_of_parent_type (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_inherited_does_not_exist_exception (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_inherited_multiple_objects_returned_exception (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_parent_cache_reuse (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_parent_child_one_to_one_link (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_parent_child_one_to_one_link_on_nonrelated_objects (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_parent_fields_available_for_filtering_in_child_model (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_related_objects_for_inherited_models (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_select_related_defer (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_select_related_works_on_parent_model_fields (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_update_inherited_model (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_update_query_counts (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_update_works_on_parent_and_child_models_at_once (model_inheritance.tests.ModelInheritanceDataTests)\",\n        \"test_values_works_on_parent_model_fields (model_inheritance.tests.ModelInheritanceDataTests)\"\n      ]\n    },\n    \"FAIL_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    },\n    \"PASS_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    }\n  }\n}"
  },
  "iterations": [],
  "ablation": null,
  "solution": "--- a/django/db/models/sql/compiler.py\n+++ b/django/db/models/sql/compiler.py\n@@ -350,6 +350,19 @@\n             if not self.query.extra or col not in self.query.extra:\n                 # 'col' is of the form 'field' or 'field1__field2' or '-field'.\n                 # Get the corresponding field object.\n+                if col == 'pk':\n+                    # Special case: pk needs to be resolved to the actual primary key field.\n+                    # When dealing with model inheritance, we need to ensure we're using\n+                    # the primary key from the correct model.\n+                    field_obj = self.query.model._meta.pk\n+                    order_by.append((\n+                        OrderBy(\n+                            self.query.resolve_ref(field_obj.name, allow_joins=True),\n+                            descending=descending\n+                        ),\n+                        False\n+                    ))\n+                    continue\n                 if col in self.query.annotation_select:\n                     # Reference to expression in SELECT clause\n                     order_by.append((\n</diff>"
}