{
  "task_id": "django__django-14997",
  "condition": "baseline",
  "max_iterations": 1,
  "model": "claude-sonnet-4-5-20250929",
  "final_passed": true,
  "final_test_output": {
    "resolved": true,
    "test_output": "{\n  \"patch_is_None\": false,\n  \"patch_exists\": true,\n  \"patch_successfully_applied\": true,\n  \"resolved\": true,\n  \"tests_status\": {\n    \"FAIL_TO_PASS\": {\n      \"success\": [\n        \"test_rename_table_references_without_alias (backends.test_ddl_references.ExpressionsTests)\",\n        \"test_alter_field_with_func_index (migrations.test_operations.OperationTests)\",\n        \"test_alter_field_with_func_unique_constraint (migrations.test_operations.OperationTests)\"\n      ],\n      \"failure\": []\n    },\n    \"PASS_TO_PASS\": {\n      \"success\": [\n        \"test_references_column (backends.test_ddl_references.ColumnsTests)\",\n        \"test_references_table (backends.test_ddl_references.ColumnsTests)\",\n        \"test_rename_column_references (backends.test_ddl_references.ColumnsTests)\",\n        \"test_rename_table_references (backends.test_ddl_references.ColumnsTests)\",\n        \"test_repr (backends.test_ddl_references.ColumnsTests)\",\n        \"test_str (backends.test_ddl_references.ColumnsTests)\",\n        \"test_references_model_mixin (migrations.test_operations.TestCreateModel)\",\n        \"test_references_column (backends.test_ddl_references.ForeignKeyNameTests)\",\n        \"test_references_table (backends.test_ddl_references.ForeignKeyNameTests)\",\n        \"test_rename_column_references (backends.test_ddl_references.ForeignKeyNameTests)\",\n        \"test_rename_table_references (backends.test_ddl_references.ForeignKeyNameTests)\",\n        \"test_repr (backends.test_ddl_references.ForeignKeyNameTests)\",\n        \"test_str (backends.test_ddl_references.ForeignKeyNameTests)\",\n        \"test_references_table (backends.test_ddl_references.TableTests)\",\n        \"test_rename_table_references (backends.test_ddl_references.TableTests)\",\n        \"test_repr (backends.test_ddl_references.TableTests)\",\n        \"test_str (backends.test_ddl_references.TableTests)\",\n        \"test_references_column (backends.test_ddl_references.IndexNameTests)\",\n        \"test_references_table (backends.test_ddl_references.IndexNameTests)\",\n        \"test_rename_column_references (backends.test_ddl_references.IndexNameTests)\",\n        \"test_rename_table_references (backends.test_ddl_references.IndexNameTests)\",\n        \"test_repr (backends.test_ddl_references.IndexNameTests)\",\n        \"test_str (backends.test_ddl_references.IndexNameTests)\",\n        \"test_references_column (backends.test_ddl_references.StatementTests)\",\n        \"test_references_table (backends.test_ddl_references.StatementTests)\",\n        \"test_rename_column_references (backends.test_ddl_references.StatementTests)\",\n        \"test_rename_table_references (backends.test_ddl_references.StatementTests)\",\n        \"test_repr (backends.test_ddl_references.StatementTests)\",\n        \"test_str (backends.test_ddl_references.StatementTests)\",\n        \"test_reference_field_by_through_fields (migrations.test_operations.FieldOperationTests)\",\n        \"test_references_field_by_from_fields (migrations.test_operations.FieldOperationTests)\",\n        \"test_references_field_by_name (migrations.test_operations.FieldOperationTests)\",\n        \"test_references_field_by_remote_field_model (migrations.test_operations.FieldOperationTests)\",\n        \"test_references_field_by_through (migrations.test_operations.FieldOperationTests)\",\n        \"test_references_field_by_to_fields (migrations.test_operations.FieldOperationTests)\",\n        \"test_references_model (migrations.test_operations.FieldOperationTests)\",\n        \"test_references_column (backends.test_ddl_references.ExpressionsTests)\",\n        \"test_references_table (backends.test_ddl_references.ExpressionsTests)\",\n        \"test_rename_column_references (backends.test_ddl_references.ExpressionsTests)\",\n        \"test_rename_table_references (backends.test_ddl_references.ExpressionsTests)\",\n        \"test_str (backends.test_ddl_references.ExpressionsTests)\",\n        \"Tests the AddField operation.\",\n        \"The CreateTable operation ignores swapped models.\",\n        \"Tests the DeleteModel operation ignores swapped models.\",\n        \"Add/RemoveIndex operations ignore swapped models.\",\n        \"Tests the AddField operation on TextField/BinaryField.\",\n        \"Tests the AddField operation on TextField.\",\n        \"test_add_constraint (migrations.test_operations.OperationTests)\",\n        \"test_add_constraint_combinable (migrations.test_operations.OperationTests)\",\n        \"test_add_constraint_percent_escaping (migrations.test_operations.OperationTests)\",\n        \"test_add_covering_unique_constraint (migrations.test_operations.OperationTests)\",\n        \"test_add_deferred_unique_constraint (migrations.test_operations.OperationTests)\",\n        \"Tests the AddField operation with a ManyToManyField.\",\n        \"Tests the AddField operation's state alteration\",\n        \"test_add_func_index (migrations.test_operations.OperationTests)\",\n        \"test_add_func_unique_constraint (migrations.test_operations.OperationTests)\",\n        \"Test the AddIndex operation.\",\n        \"test_add_index_state_forwards (m"
  },
  "iterations": [],
  "ablation": null,
  "solution": "--- a/django/db/backends/ddl_references.py\n+++ b/django/db/backends/ddl_references.py\n@@ -193,7 +193,8 @@ class Expressions(TableColumns):\n         expressions = deepcopy(self.expressions)\n         self.columns = []\n         for col in self.compiler.query._gen_cols([expressions]):\n-            col.alias = new_table\n+            if col.alias == old_table:\n+                col.alias = new_table\n         self.expressions = expressions\n         super().rename_table_references(old_table, new_table)"
}