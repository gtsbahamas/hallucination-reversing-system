{
  "task_id": "astropy__astropy-7746",
  "condition": "baseline",
  "max_iterations": 1,
  "model": "claude-sonnet-4-5-20250929",
  "final_passed": false,
  "final_test_output": {
    "resolved": false,
    "test_output": "{\n  \"patch_is_None\": false,\n  \"patch_exists\": true,\n  \"patch_successfully_applied\": true,\n  \"resolved\": false,\n  \"tests_status\": {\n    \"FAIL_TO_PASS\": {\n      \"success\": [],\n      \"failure\": [\n        \"astropy/wcs/tests/test_wcs.py::test_zero_size_input\"\n      ]\n    },\n    \"PASS_TO_PASS\": {\n      \"success\": [],\n      \"failure\": [\n        \"astropy/wcs/tests/test_wcs.py::TestMaps::test_consistency\",\n        \"astropy/wcs/tests/test_wcs.py::TestMaps::test_maps\",\n        \"astropy/wcs/tests/test_wcs.py::TestSpectra::test_consistency\",\n        \"astropy/wcs/tests/test_wcs.py::TestSpectra::test_spectra\",\n        \"astropy/wcs/tests/test_wcs.py::test_fixes\",\n        \"astropy/wcs/tests/test_wcs.py::test_outside_sky\",\n        \"astropy/wcs/tests/test_wcs.py::test_pix2world\",\n        \"astropy/wcs/tests/test_wcs.py::test_load_fits_path\",\n        \"astropy/wcs/tests/test_wcs.py::test_dict_init\",\n        \"astropy/wcs/tests/test_wcs.py::test_extra_kwarg\",\n        \"astropy/wcs/tests/test_wcs.py::test_3d_shapes\",\n        \"astropy/wcs/tests/test_wcs.py::test_preserve_shape\",\n        \"astropy/wcs/tests/test_wcs.py::test_broadcasting\",\n        \"astropy/wcs/tests/test_wcs.py::test_shape_mismatch\",\n        \"astropy/wcs/tests/test_wcs.py::test_invalid_shape\",\n        \"astropy/wcs/tests/test_wcs.py::test_warning_about_defunct_keywords\",\n        \"astropy/wcs/tests/test_wcs.py::test_warning_about_defunct_keywords_exception\",\n        \"astropy/wcs/tests/test_wcs.py::test_to_header_string\",\n        \"astropy/wcs/tests/test_wcs.py::test_to_fits\",\n        \"astropy/wcs/tests/test_wcs.py::test_to_header_warning\",\n        \"astropy/wcs/tests/test_wcs.py::test_no_comments_in_header\",\n        \"astropy/wcs/tests/test_wcs.py::test_find_all_wcs_crash\",\n        \"astropy/wcs/tests/test_wcs.py::test_validate\",\n        \"astropy/wcs/tests/test_wcs.py::test_validate_with_2_wcses\",\n        \"astropy/wcs/tests/test_wcs.py::test_crpix_maps_to_crval\",\n        \"astropy/wcs/tests/test_wcs.py::test_all_world2pix\",\n        \"astropy/wcs/tests/test_wcs.py::test_scamp_sip_distortion_parameters\",\n        \"astropy/wcs/tests/test_wcs.py::test_fixes2\",\n        \"astropy/wcs/tests/test_wcs.py::test_unit_normalization\",\n        \"astropy/wcs/tests/test_wcs.py::test_footprint_to_file\",\n        \"astropy/wcs/tests/test_wcs.py::test_validate_faulty_wcs\",\n        \"astropy/wcs/tests/test_wcs.py::test_error_message\",\n        \"astropy/wcs/tests/test_wcs.py::test_out_of_bounds\",\n        \"astropy/wcs/tests/test_wcs.py::test_calc_footprint_1\",\n        \"astropy/wcs/tests/test_wcs.py::test_calc_footprint_2\",\n        \"astropy/wcs/tests/test_wcs.py::test_calc_footprint_3\",\n        \"astropy/wcs/tests/test_wcs.py::test_sip\",\n        \"astropy/wcs/tests/test_wcs.py::test_printwcs\",\n        \"astropy/wcs/tests/test_wcs.py::test_invalid_spherical\",\n        \"astropy/wcs/tests/test_wcs.py::test_no_iteration\",\n        \"astropy/wcs/tests/test_wcs.py::test_sip_tpv_agreement\",\n        \"astropy/wcs/tests/test_wcs.py::test_tpv_copy\",\n        \"astropy/wcs/tests/test_wcs.py::test_hst_wcs\",\n        \"astropy/wcs/tests/test_wcs.py::test_list_naxis\",\n        \"astropy/wcs/tests/test_wcs.py::test_sip_broken\",\n        \"astropy/wcs/tests/test_wcs.py::test_no_truncate_crval\",\n        \"astropy/wcs/tests/test_wcs.py::test_no_truncate_crval_try2\",\n        \"astropy/wcs/tests/test_wcs.py::test_no_truncate_crval_p17\",\n        \"astropy/wcs/tests/test_wcs.py::test_no_truncate_using_compare\",\n        \"astropy/wcs/tests/test_wcs.py::test_passing_ImageHDU\",\n        \"astropy/wcs/tests/test_wcs.py::test_inconsistent_sip\",\n        \"astropy/wcs/tests/test_wcs.py::test_bounds_check\",\n        \"astropy/wcs/tests/test_wcs.py::test_naxis\",\n        \"astropy/wcs/tests/test_wcs.py::test_sip_with_altkey\",\n        \"astropy/wcs/tests/test_wcs.py::test_to_fits_1\",\n        \"astropy/wcs/tests/test_wcs.py::test_keyedsip\"\n      ]\n    },\n    \"FAIL_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    },\n    \"PASS_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    }\n  }\n}"
  },
  "iterations": [],
  "ablation": null,
  "solution": "--- a/astropy/wcs/wcs.py\n+++ b/astropy/wcs/wcs.py\n@@ -1220,6 +1220,12 @@ class WCS(WCSBase):\n             else:\n                 axes = np.broadcast_arrays(*axes)\n             xy = np.hstack([x.reshape((x.size, 1)) for x in axes])\n+            \n+            # Handle empty input arrays\n+            if xy.shape[0] == 0:\n+                result = np.empty((0, self.naxis))\n+                return [result[:, i] for i in range(self.naxis)]\n+            \n             if ra_dec_order and sky == 'input':\n                 xy = self._denormalize_sky(xy)\n             output = func(xy, origin)\n@@ -1248,6 +1254,12 @@ class WCS(WCSBase):\n                     axes[i] = axes[i].reshape((axes[i].size, 1))\n \n             xy = np.hstack(axes)\n+            \n+            # Handle empty input arrays\n+            if xy.shape[0] == 0:\n+                result = np.empty((0, self.naxis))\n+                return [result[:, i] for i in range(self.naxis)]\n+            \n             if ra_dec_order and sky == 'input':\n                 xy = self._denormalize_sky(xy)\n             output = func(xy, origin)"
}