{
  "task_id": "django__django-12286",
  "condition": "baseline",
  "max_iterations": 1,
  "model": "claude-sonnet-4-5-20250929",
  "final_passed": false,
  "final_test_output": {
    "resolved": false,
    "test_output": "{\n  \"patch_is_None\": false,\n  \"patch_exists\": true,\n  \"patch_successfully_applied\": true,\n  \"resolved\": false,\n  \"tests_status\": {\n    \"FAIL_TO_PASS\": {\n      \"success\": [],\n      \"failure\": [\n        \"test_valid_variant_consistent_language_settings (check_framework.test_translation.TranslationCheckTests)\"\n      ]\n    },\n    \"PASS_TO_PASS\": {\n      \"success\": [\n        \"test_inconsistent_language_settings (check_framework.test_translation.TranslationCheckTests)\",\n        \"test_invalid_language_code (check_framework.test_translation.TranslationCheckTests)\",\n        \"test_invalid_languages (check_framework.test_translation.TranslationCheckTests)\",\n        \"test_invalid_languages_bidi (check_framework.test_translation.TranslationCheckTests)\",\n        \"test_valid_language_code (check_framework.test_translation.TranslationCheckTests)\",\n        \"test_valid_languages (check_framework.test_translation.TranslationCheckTests)\",\n        \"test_valid_languages_bidi (check_framework.test_translation.TranslationCheckTests)\"\n      ],\n      \"failure\": []\n    },\n    \"FAIL_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    },\n    \"PASS_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    }\n  }\n}"
  },
  "iterations": [],
  "ablation": null,
  "solution": "--- a/django/core/checks/translation.py\n+++ b/django/core/checks/translation.py\n@@ -54,6 +54,12 @@ def check_setting_languages_bidi(app_configs, **kwargs):\n @register(Tags.translation)\n def check_language_settings_consistent(app_configs, **kwargs):\n     \"\"\"Error if language settings are not consistent with each other.\"\"\"\n-    available_tags = {i for i, _ in settings.LANGUAGES} | {'en-us'}\n-    if settings.LANGUAGE_CODE not in available_tags:\n+    available_tags = {tag for tag, _ in settings.LANGUAGES} | {'en-us'}\n+    if settings.LANGUAGE_CODE not in available_tags:\n+        # Check if a base language is available for sublanguages.\n+        # For example, 'de-at' is valid if 'de' is in available_tags.\n+        base_language = settings.LANGUAGE_CODE.split('-')[0]\n+        if base_language not in available_tags:\n+            return [E004]\n+    return []\n+    return []\n-        return [E004]\n-    return []\n```\n\nWait, I see there's a duplicate `return []` in my patch. Let me fix that:\n\n```diff\n--- a/django/core/checks/translation.py\n+++ b/django/core/checks/translation.py\n@@ -54,6 +54,10 @@ def check_setting_languages_bidi(app_configs, **kwargs):\n @register(Tags.translation)\n def check_language_settings_consistent(app_configs, **kwargs):\n     \"\"\"Error if language settings are not consistent with each other.\"\"\"\n-    available_tags = {i for i, _ in settings.LANGUAGES} | {'en-us'}\n-    if settings.LANGUAGE_CODE not in available_tags:\n-        return [E004]\n+    available_tags = {tag for tag, _ in settings.LANGUAGES} | {'en-us'}\n+    if settings.LANGUAGE_CODE not in available_tags:\n+        # Check if a base language is available for sublanguages.\n+        # For example, 'de-at' is valid if 'de' is in available_tags.\n+        base_language = settings.LANGUAGE_CODE.split('-')[0]\n+        if base_language not in available_tags:\n+            return [E004]\n     return []"
}