{
  "task_id": "sympy__sympy-21612",
  "condition": "lucid",
  "max_iterations": 3,
  "model": "claude-sonnet-4-5-20250929",
  "final_passed": true,
  "final_test_output": {
    "resolved": true,
    "test_output": "{\n  \"patch_is_None\": false,\n  \"patch_exists\": true,\n  \"patch_successfully_applied\": true,\n  \"resolved\": true,\n  \"tests_status\": {\n    \"FAIL_TO_PASS\": {\n      \"success\": [\n        \"test_Mul\"\n      ],\n      \"failure\": []\n    },\n    \"PASS_TO_PASS\": {\n      \"success\": [\n        \"test_printmethod\",\n        \"test_Abs\",\n        \"test_Add\",\n        \"test_Catalan\",\n        \"test_ComplexInfinity\",\n        \"test_Derivative\",\n        \"test_dict\",\n        \"test_Dict\",\n        \"test_Dummy\",\n        \"test_EulerGamma\",\n        \"test_Exp\",\n        \"test_factorial\",\n        \"test_Function\",\n        \"test_Geometry\",\n        \"test_GoldenRatio\",\n        \"test_TribonacciConstant\",\n        \"test_ImaginaryUnit\",\n        \"test_Infinity\",\n        \"test_Integer\",\n        \"test_Integral\",\n        \"test_Interval\",\n        \"test_AccumBounds\",\n        \"test_Lambda\",\n        \"test_Limit\",\n        \"test_list\",\n        \"test_Matrix_str\",\n        \"test_NaN\",\n        \"test_NegativeInfinity\",\n        \"test_Order\",\n        \"test_Permutation_Cycle\",\n        \"test_Pi\",\n        \"test_Poly\",\n        \"test_PolyRing\",\n        \"test_FracField\",\n        \"test_PolyElement\",\n        \"test_FracElement\",\n        \"test_GaussianInteger\",\n        \"test_GaussianRational\",\n        \"test_Pow\",\n        \"test_sqrt\",\n        \"test_Rational\",\n        \"test_Float\",\n        \"test_Relational\",\n        \"test_AppliedBinaryRelation\",\n        \"test_CRootOf\",\n        \"test_RootSum\",\n        \"test_GroebnerBasis\",\n        \"test_set\",\n        \"test_SparseMatrix\",\n        \"test_Sum\",\n        \"test_Symbol\",\n        \"test_tuple\",\n        \"test_Series_str\",\n        \"test_TransferFunction_str\",\n        \"test_Parallel_str\",\n        \"test_Feedback_str\",\n        \"test_Quaternion_str_printer\",\n        \"test_Quantity_str\",\n        \"test_wild_str\",\n        \"test_wild_matchpy\",\n        \"test_zeta\",\n        \"test_issue_3101\",\n        \"test_issue_3103\",\n        \"test_issue_4021\",\n        \"test_sstrrepr\",\n        \"test_infinity\",\n        \"test_full_prec\",\n        \"test_noncommutative\",\n        \"test_empty_printer\",\n        \"test_settings\",\n        \"test_RandomDomain\",\n        \"test_FiniteSet\",\n        \"test_UniversalSet\",\n        \"test_PrettyPoly\",\n        \"test_categories\",\n        \"test_Tr\",\n        \"test_issue_6387\",\n        \"test_MatMul_MatAdd\",\n        \"test_MatrixSlice\",\n        \"test_true_false\",\n        \"test_Equivalent\",\n        \"test_Xor\",\n        \"test_Complement\",\n        \"test_SymmetricDifference\",\n        \"test_UnevaluatedExpr\",\n        \"test_MatrixElement_printing\",\n        \"test_MatrixSymbol_printing\",\n        \"test_MatrixExpressions\",\n        \"test_Subs_printing\",\n        \"test_issue_15716\",\n        \"test_str_special_matrices\",\n        \"test_issue_14567\",\n        \"test_issue_21119_21460\",\n        \"test_Str\",\n        \"test_diffgeom\",\n        \"test_NDimArray\",\n        \"test_Predicate\",\n        \"test_AppliedPredicate\"\n      ],\n      \"failure\": []\n    },\n    \"FAIL_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    },\n    \"PASS_TO_FAIL\": {\n      \"success\": [],\n      \"failure\": []\n    }\n  }\n}"
  },
  "iterations": [
    {
      "iteration": 1,
      "verification": "ALL TESTS PASSED",
      "passed": true,
      "early_stop": true
    }
  ],
  "ablation": null,
  "solution": "--- a/sympy/printing/str.py\n+++ b/sympy/printing/str.py\n@@ -330,7 +330,7 @@ class StrPrinter(Printer):\n                     b.append(apow(item))\n                 else:\n                     if (len(item.args[0].args) != 1 and\n-                            isinstance(item.base, Mul)):\n+                            isinstance(item.base, (Mul, Pow))):\n                         # To avoid situations like #14160\n                         pow_paren.append(item)\n                     b.append(item.base)\n--- a/sympy/printing/tests/test_str.py\n+++ b/sympy/printing/tests/test_str.py\n@@ -252,6 +252,8 @@ def test_Mul():\n     # For issue 14160\n     assert str(Mul(-2, x, Pow(Mul(y,y,evaluate=False), -1, evaluate=False),\n                                                 evaluate=False)) == '-2*x/(y*y)'\n+    # issue 21537\n+    assert str(Mul(x, Pow(1/y, -1, evaluate=False), evaluate=False)) == 'x/(1/y)'\n \n \n     class CustomClass1(Expr):"
}