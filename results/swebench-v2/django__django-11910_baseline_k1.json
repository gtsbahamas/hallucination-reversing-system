{
  "task_id": "django__django-11910",
  "condition": "baseline",
  "max_iterations": 1,
  "model": "claude-sonnet-4-5-20250929",
  "final_passed": false,
  "final_test_output": {
    "resolved": false,
    "test_output": "{\n  \"patch_is_None\": false,\n  \"patch_exists\": true,\n  \"patch_successfully_applied\": true,\n  \"resolved\": false,\n  \"tests_status\": {\n    \"FAIL_TO_PASS\": {\n      \"success\": [],\n      \"failure\": [\n        \"test_rename_referenced_primary_key (migrations.test_autodetector.AutodetectorTests)\"\n      ]\n    },\n    \"PASS_TO_PASS\": {\n      \"success\": [\n        \"test_add_alter_order_with_respect_to (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_add_blank_textfield_and_charfield (migrations.test_autodetector.AutodetectorTests)\",\n        \"Test change detection of new constraints.\",\n        \"test_add_date_fields_with_auto_now_add_asking_for_default (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_add_date_fields_with_auto_now_add_not_asking_for_null_addition (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_add_date_fields_with_auto_now_not_asking_for_default (migrations.test_autodetector.AutodetectorTests)\",\n        \"Tests autodetection of new fields.\",\n        \"#22030 - Adding a field with a default should work.\",\n        \"Tests index/unique_together detection.\",\n        \"Test change detection of new indexes.\",\n        \"#22435 - Adding a ManyToManyField should not prompt for a default.\",\n        \"test_add_model_order_with_respect_to (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_add_non_blank_textfield_and_charfield (migrations.test_autodetector.AutodetectorTests)\",\n        \"Tests detection for adding db_table in model's options.\",\n        \"Tests detection for changing db_table in model's options'.\",\n        \"test_alter_db_table_no_changes (migrations.test_autodetector.AutodetectorTests)\",\n        \"Tests detection for removing db_table in model's options.\",\n        \"test_alter_db_table_with_model_change (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_alter_field_to_fk_dependency_other_app (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_alter_field_to_not_null_oneoff_default (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_alter_field_to_not_null_with_default (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_alter_field_to_not_null_without_default (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_alter_fk_before_model_deletion (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_alter_many_to_many (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_alter_model_managers (migrations.test_autodetector.AutodetectorTests)\",\n        \"Changing a model's options should make a change.\",\n        \"Changing a proxy model's options should also make a change.\",\n        \"Tests auto-naming of migrations for graph matching.\",\n        \"Bases of other models come first.\",\n        \"test_circular_dependency_mixed_addcreate (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_circular_dependency_swappable (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_circular_dependency_swappable2 (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_circular_dependency_swappable_self (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_circular_fk_dependency (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_concrete_field_changed_to_many_to_many (migrations.test_autodetector.AutodetectorTests)\",\n        \"Test creation of new model with constraints already defined.\",\n        \"Test creation of new model with indexes already defined.\",\n        \"test_create_with_through_model (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_custom_deconstructible (migrations.test_autodetector.AutodetectorTests)\",\n        \"Tests custom naming of migrations for graph matching.\",\n        \"Field instances are handled correctly by nested deconstruction.\",\n        \"test_deconstruct_type (migrations.test_autodetector.AutodetectorTests)\",\n        \"Nested deconstruction descends into dict values.\",\n        \"Nested deconstruction descends into lists.\",\n        \"Nested deconstruction descends into tuples.\",\n        \"test_default_related_name_option (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_different_regex_does_alter (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_empty_foo_together (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_first_dependency (migrations.test_autodetector.AutodetectorTests)\",\n        \"Having a ForeignKey automatically adds a dependency.\",\n        \"test_fk_dependency_other_app (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_foo_together_no_changes (migrations.test_autodetector.AutodetectorTests)\",\n        \"Tests unique_together and field removal detection & ordering\",\n        \"test_foreign_key_removed_before_target_model (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_identical_regex_doesnt_alter (migrations.test_autodetector.AutodetectorTests)\",\n        \"test_keep_db_table_with_model_change (migrations.test_autodetector.Autodetec"
  },
  "iterations": [],
  "ablation": null,
  "solution": "--- a/django/db/migrations/autodetector.py\n+++ b/django/db/migrations/autodetector.py\n@@ -1120,6 +1120,23 @@ class MigrationAutodetector:\n                     old_field_dec = self.deep_deconstruct(old_field)\n                     new_field_dec = self.deep_deconstruct(new_field)\n                     if old_field_dec != new_field_dec:\n+                        # Skip generating AlterField if only the to_field of a\n+                        # ForeignKey changed due to a primary key rename on the\n+                        # related model.\n+                        both_m2m = old_field.many_to_many and new_field.many_to_many\n+                        neither_m2m = not old_field.many_to_many and not new_field.many_to_many\n+                        if (\n+                            (both_m2m or neither_m2m) and\n+                            hasattr(old_field, 'remote_field') and\n+                            getattr(old_field.remote_field, 'model', None) and\n+                            hasattr(new_field, 'remote_field') and\n+                            getattr(new_field.remote_field, 'model', None) and\n+                            old_field.remote_field.model == new_field.remote_field.model and\n+                            hasattr(old_field.remote_field, 'field_name') and\n+                            hasattr(new_field.remote_field, 'field_name') and\n+                            old_field.remote_field.field_name != new_field.remote_field.field_name\n+                        ):\n+                            continue\n                         both_m2m = old_field.many_to_many and new_field.many_to_many\n                         neither_m2m = not old_field.many_to_many and not new_field.many_to_many\n                         if both_m2m or neither_m2m:"
}