## ACC-011: Accounts Payable

**Route:** /accounting/accounts-payable
**Component:** src/pages/accounting/AccountsPayablePage.tsx (thin wrapper around AccountsPayableTab)
**Guard:** accounting.invoices.read (via ROUTE_PERMISSION_MAP['accounting'])

### Roles
- Full access (bypass): super_admin, owner, operations_manager
- Navigation-level: FINANCIAL_ROLES + ap_specialist, requiredPermissions: ['financial.ap.view']
- Route guard resolves to: DENIED for all non-FULL_ACCESS_ROLES (accounting.invoices.read not in permissionMappings.ts)

### Database
- Primary: bills (via useAccountsPayable -> AccountsPayableService.getBills)
- Filters: business_id, status (pending_approval, overdue), overdue_only, pending_approval
- Additional queries: bills-overdue, bills-pending-approval, ap-aging

### Behavior
1. Page is a thin wrapper: renders DashboardLayout > AccountsPayableTab
2. AccountsPayableTab uses useAccountsPayable hook which queries bills table via AccountsPayableService
3. 4 summary cards: Total Bills (count), Pending Approval (count, yellow), Overdue (count, red), Total Amount (sum of total_amount)
4. 11 sub-tabs across 2 rows:
   - Row 1: Bills (BillsDashboard), Payments (PaymentsTab), Suppliers (SuppliersTab), Purchase Orders (redirect link), Analytics (APAnalyticsPanel), Documents (DocumentTemplatesManager)
   - Row 2: Approvals (ApprovalDashboard), Credit Notes (modal trigger), Checks (CheckTemplateManager), Email (modal trigger), Reports (FinancialReportsTab)
5. Purchase Orders tab is NOT a component — it's a placeholder with a link to "/operations?tab=purchases"
6. Credit Notes tab shows a placeholder UI with "Create Credit Note" button that opens CreateSupplierCreditNoteModal
7. Email Settings tab shows a placeholder UI with "Email Management" button that opens EmailManagementModal
8. All tab components are lazy-loaded with React.lazy() and Suspense
9. useAccountsPayable provides full CRUD: createBill, submitForApproval, approveBill, rejectBill, voidBill, postToGL

### Scaffolding Flags
- REDIRECT: Purchase Orders tab is not implemented — links to /operations?tab=purchases with a placeholder UI
- PLACEHOLDER UI: Credit Notes tab shows an empty dashed-border area with a CTA button (no list of existing credit notes)
- PLACEHOLDER UI: Email Settings tab shows an empty dashed-border area with a CTA button (no settings displayed inline)
