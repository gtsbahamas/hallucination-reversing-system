## ACC-001: Invoices List

**Route:** /accounting/invoices
**Component:** src/pages/accounting/InvoicesPage.tsx
**Guard:** accounting.invoices.read (via ROUTE_PERMISSION_MAP['accounting'])

### Roles
- Full access (bypass): super_admin, owner, operations_manager
- Navigation-level: FINANCIAL_ROLES + ar_specialist (from NAVIGATION_PERMISSIONS)
- Route guard resolves to: DENIED for all non-FULL_ACCESS_ROLES (accounting.invoices.read not in permissionMappings.ts)

### Database
- Primary: `invoices`
- Joins: `customers` (id, first_name, last_name, email), `invoice_line_items` (id, description, quantity, unit_price, line_total, product_id)
- Filters: business_id (from useBusiness), status, customer_id, date_from, date_to, search (invoice_number, notes via ilike)

### Behavior
1. Lists all invoices for the current business with server-side pagination (default 20 per page)
2. Supports client-side search filtering by invoice_number, customer name, and customer email
3. Supports server-side search filtering by invoice_number and notes (via ilike)
4. Displays summary stats: total count, draft count, sent count, paid count, overdue count, total value, unpaid value
5. Provides two view modes: list view and kanban view (columns: draft, sent, paid, overdue)
6. Clicking an invoice opens InvoiceViewModal (not navigation to detail page)
7. "New Invoice" button opens CreateInvoiceModal
8. Edit flow: from InvoiceViewModal, user can click edit to open EditInvoiceModal
9. Automatically marks sent invoices as overdue if due_date < today and balance_due > 0 (client-side status rewrite)
10. Pagination controls with page size options [10, 20, 50, 100]
11. Hook exposes createInvoice, updateInvoice, deleteInvoice functions with real Supabase calls
12. createInvoice generates invoice number client-side (INV-YYYYMM-XXXXXX format) and inserts invoice + line items

### Scaffolding Flags
- None found in InvoicesPage.tsx or useInvoicesPaginated.tsx
