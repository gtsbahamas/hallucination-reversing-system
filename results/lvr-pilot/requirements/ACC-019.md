## ACC-019: Cash Flow

**Route:** /accounting/cash-flow
**Component:** src/pages/accounting/CashFlowPage.tsx
**Guard:** accounting.invoices.read (via ROUTE_PERMISSION_MAP['accounting'])

### Roles
- Full access (bypass): super_admin, owner, operations_manager
- Navigation-level: No entry in NAVIGATION_PERMISSIONS
- Route guard resolves to: DENIED for all non-FULL_ACCESS_ROLES

### Database
- Primary: `cash_flow_categories` (filtered by business_id, is_active=true)
- Primary: `cash_flow_transactions` joined with `cash_flow_categories` (filtered by business_id)
- Secondary: `invoices` (via useInvoices hook for unpaid invoices)
- Filters: business_id on both tables

### Behavior
1. Page wraps `CashFlowTab` in DashboardLayout with TrendingUp icon
2. On mount, loads cash flow categories and transactions from Supabase
3. Cash flow statement calculated client-side by filtering transactions by date range and category_type
4. Three category types: operating, investing, financing
5. Displays 3 summary cards: Cash Inflow, Cash Outflow, Net Cash Flow (current month)
6. 4 sub-tabs: "Unpaid Invoices", "Cash Flow Statement", "Cash Flow Forecast", "Activity Tracking"
7. Unpaid Invoices tab shows invoices where status != 'paid' and balance_due > 0, with summary cards for Overdue, Outstanding, Total Outstanding
8. Overdue calculation: filters invoices with status === 'overdue'
9. Cash Flow Statement tab shows operating/investing/financing sections with transaction lists (limited to 5 per section) and net totals
10. Cash Flow Forecast tab is a placeholder - shows icon and text "Cash flow forecasting chart will be displayed here" with "Connect your bank accounts to generate forecasts"
11. Activity Tracking tab shows recent operating and investing activities (3 per section)
12. Monthly/Quarterly toggle exists on forecast tab but does nothing since forecast is placeholder
13. Amounts parsed from strings via `parseFloat(t.amount)` in getCashFlowStatement

### Scaffolding Flags
- Cash Flow Forecast tab is entirely placeholder (CashFlowTab.tsx:332-339): shows Calendar icon and "Cash flow forecasting chart will be displayed here"
- Monthly/Quarterly toggle buttons have no effect since forecast is not implemented
- No actual chart rendering anywhere in the component despite the page being "Cash Flow Management"
