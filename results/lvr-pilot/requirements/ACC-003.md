## ACC-003: Bills List

**Route:** /accounting/bills
**Component:** src/pages/accounting/BillsPage.tsx (wrapper) -> src/components/accounting/BillsDashboard.tsx (main)
**Guard:** accounting.invoices.read (via ROUTE_PERMISSION_MAP['accounting'])

### Roles
- Full access (bypass): super_admin, owner, operations_manager
- Navigation-level: FINANCIAL_ROLES + ap_specialist (from NAVIGATION_PERMISSIONS, uses financial.ap.view)
- Route guard resolves to: DENIED for all non-FULL_ACCESS_ROLES (accounting.invoices.read not in permissionMappings.ts)
- Component-level permissions: `financial.ap` delete and approve checked via usePermission hook

### Database
- Primary: `bills` (via AccountsPayableService)
- Joins: `suppliers` (name, email), `bill_line_items` (*)
- Filters: business_id (from useBusiness), deleted_at IS NULL (soft delete filter in service)
- Related: `bill_payments` (checked before delete to prevent deleting bills with payments)

### Behavior
1. Fetches bills via useAccountsPayable hook which uses AccountsPayableService.getBills() — React Query based
2. Displays summary cards: Total Bills, Pending Approval, Overdue, Total Amount
3. Client-side search by bill_number and supplier name
4. Client-side status filter dropdown: all, draft, pending_approval, approved, paid, overdue, cancelled
5. Sortable table columns via useSortableData hook with default sort by due_date desc
6. Draggable column headers for reorder via DraggableTableHead + useColumnPreferences
7. Column visibility settings via ColumnSettingsModal
8. Bulk selection with select-all checkbox
9. Bulk payment: validates all selected bills are same vendor, not draft/pending_approval, not fully paid
10. Bulk email: shows "Coming Soon" toast — NOT IMPLEMENTED
11. Bulk delete: soft-deletes by setting deleted_at + deleted_by (not hard delete)
12. Single delete: checks for existing bill_payments before allowing delete; checks if approved/paid requires manager approval (canManageApprovals permission)
13. View button opens BillDetailsModal
14. Edit button opens EditBillModal
15. Delete button (per-row): permission-gated on canDeleteBills (financial.ap delete)
16. Create Bill: opens EnhancedCreateBillModal, refetches on close
17. BillsDashboard is the actual component — BillsPage.tsx is a thin wrapper with DashboardLayout

### Scaffolding Flags
- Bulk email: line 711-718 — onClick shows toast "Coming Soon" / "Bulk email sending will be available soon"
