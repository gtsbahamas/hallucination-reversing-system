## ACC-017: Tax Reporting

**Route:** /accounting/tax-reporting
**Component:** src/pages/accounting/TaxReportingPage.tsx
**Guard:** accounting.invoices.read (via ROUTE_PERMISSION_MAP['accounting'])

### Roles
- Full access (bypass): super_admin, owner, operations_manager
- Navigation-level: FINANCIAL_ROLES, requiredPermissions: ['financial.tax.view']
- Route guard resolves to: DENIED for all non-FULL_ACCESS_ROLES

### Database
- Primary (VAT): `invoices` (filtered by business_id, date range, status != 'draft')
- Primary (VAT): `expenses` (filtered by business_id, date range, status != 'draft')
- Primary (Income): `account_transactions` joined with `chart_of_accounts` and `journal_entries`
- Filters: business_id, date range (startDate-endDate), status != 'draft'

### Behavior
1. Page wraps `TaxReportingTab` in DashboardLayout with Receipt icon and "Tax Reporting" heading
2. User selects date range (defaults to Jan 1 of current year through today)
3. Two sub-tabs: "VAT Report" and "Income Tax"
4. VAT Report: "Generate VAT Report" button queries invoices and expenses tables
5. VAT calculation: salesVAT = sum of invoice.tax_amount, purchaseVAT = sum of expense.tax_amount, netVAT = salesVAT - purchaseVAT
6. VAT report displays summary (Sales VAT, Purchase VAT, Net VAT Due) and invoice detail table
7. "Export VAT Report" button generates CSV with period, summary, and invoice details via data URI download
8. Income Tax tab: "Generate Income Statement for Tax" button queries account_transactions joined with chart_of_accounts
9. Income statement groups by account_type: revenue (credit - debit) and expense (debit - credit)
10. Displays Total Revenue, Total Expenses, and Taxable Income (net = revenue - expenses)
11. Description text references "Bahamas tax regulations"
12. No export functionality for income tax tab

### Scaffolding Flags
- No export button for income tax report (asymmetric with VAT tab)
- Income tax query filters by `chart_of_accounts.business_id` on a join, which may not filter correctly through Supabase PostgREST (should filter on account_transactions or journal_entries directly)
- No pagination on invoice/expense results
- None of the standard scaffolding patterns (TODO, Coming soon, empty handlers) found
