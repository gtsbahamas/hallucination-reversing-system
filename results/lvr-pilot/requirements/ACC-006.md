## ACC-006: Expense Detail

**Route:** /accounting/expenses/:id
**Component:** src/pages/accounting/ExpenseDetailPage.tsx
**Guard:** accounting.invoices.read (via ROUTE_PERMISSION_MAP['accounting'])

### Roles
- Full access (bypass): super_admin, owner, operations_manager
- Navigation-level: FINANCIAL_ROLES + ap_specialist (from NAVIGATION_PERMISSIONS)
- Route guard resolves to: DENIED for all non-FULL_ACCESS_ROLES (accounting.invoices.read not in permissionMappings.ts)

### Database
- Primary: `expenses`
- Joins: `employees` (id, first_name, last_name, email)
- Filters: id (from URL params), business_id (from useBusiness)

### Behavior
1. Fetches single expense by id + business_id using Supabase `.single()` with employees join
2. Displays tabbed layout: Details, Receipt, Accounting, Activity
3. Details tab shows: description, amount, category, expense_date, vendor, payment_method, status, employee, billable/reimbursable checkboxes (disabled), notes
4. Receipt tab shows receipt image (if receipt_url exists) with download button, or "No receipt attached" placeholder
5. Accounting tab shows expense account mapping (hardcoded "Expenses : {category}") and "Tax Deductible: Yes" (hardcoded) with placeholder text about chart of accounts
6. Activity tab shows created_at and updated_at timestamps
7. Status badges for: draft, submitted, approved, rejected, paid, reimbursed
8. Approve/Reject buttons visible when status === 'submitted'
9. Mark Reimbursed button visible when status === 'approved' AND reimbursable === true
10. Edit button navigates to /accounting/expenses/:id/edit (route may not exist)
11. Delete button: window.confirm() then hard-deletes via `.from('expenses').delete()`, navigates to /accounting/expenses
12. "Duplicate Expense" button has NO onClick handler — does nothing
13. Employee sidebar shows employee name + email with "View Employee" link to /employees/:id
14. Summary sidebar shows amount, category, status, date, billable/reimbursable flags
15. Download Receipt opens receipt_url in new tab via window.open()

### Scaffolding Flags
- Accounting tab: placeholder text "Accounting integration details will be displayed here when chart of accounts is linked" (line 491)
- Accounting tab: hardcoded "Tax Deductible: Yes" (line 487) — not from database
- Activity tab: comment "Additional activity items would go here" (line 514)
- Duplicate Expense button: no onClick handler (lines 604-611)
