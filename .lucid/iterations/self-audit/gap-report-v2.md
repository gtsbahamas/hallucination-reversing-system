# LUCID Self-Audit Gap Report (v2)

*Generated: 2026-02-01*
*Method: Re-verification of 52 claims after fixes applied*
*Changes since v1: Fixed acronym (CLAIM-01), added `lucid regenerate` (CLAIM-10, CLAIM-11)*

---

## Correction: v1 Report Had Inconsistent Summary

The v1 executive summary stated 28 PASS / 8 PARTIAL / 6 FAIL / 10 N/A = 76.2%.
The v1 detailed findings actually show 38 PASS / 7 PARTIAL / 4 FAIL / 3 N/A = 84.7%.
The summary was drafted before the detailed analysis and never reconciled.
This is exactly the kind of error LUCID is designed to catch.

---

## Executive Summary (v2)

| Metric | v1 (actual) | v2 (after fixes) | Delta |
|--------|-------------|-------------------|-------|
| PASS | 38 | 41 | +3 |
| PARTIAL | 7 | 7 | — |
| FAIL | 4 | 1 | -3 |
| N/A | 3 | 3 | — |
| **Compliance** | **84.7%** | **90.8%** | **+6.1** |

*Score formula: (PASS + PARTIAL * 0.5) / (total - N/A)*

---

## What Changed

### CLAIM-01 [critical]: FAIL → PASS

**Before:** package.json said "Legal Understanding through Code Inspection & Discovery"
**After:** package.json now says "Leveraging Unverified Claims Into Deliverables"
**Evidence:** `package.json:4` matches `README.md:3` and `src/cli.ts:16`

### CLAIM-10 [high]: FAIL → PASS

**Before:** No `regenerate` command existed
**After:** `lucid regenerate` reads iteration N's hallucinated doc + claims.json + verification.json, feeds prior results to Claude with a regeneration prompt that instructs it to keep PASS claims, refine PARTIALs, and drop/keep/revise FAILs while hallucinating new features. Produces iteration N+1.
**Evidence:** `src/commands/regenerate.ts` (152 lines), registered in `src/cli.ts:57-60`

### CLAIM-11 [high]: FAIL → PASS

**Before:** Running `lucid hallucinate` again produced a fresh hallucination from config, with no mechanism to feed iteration N into N+1
**After:** The convergence loop is now functional via `regenerate`:
```
hallucinate → extract → verify → report → regenerate → extract → verify → report → ...
```
**Evidence:** `src/lib/system-prompts.ts` exports `getRegenerationSystemPrompt()` and `getRegenerationUserPrompt()` which build context from prior extraction + verification results. `src/lib/anthropic.ts` exports `streamRegeneration()`.

---

## Remaining Issues

### FAIL (1)

**CLAIM-52** [medium] — `src/lib/report-generator.ts:210` footer links to `https://franklabs.io/lucid` — a URL that may not exist. Every generated report includes this link.

### PARTIAL (7)

| Claim | Severity | Issue |
|-------|----------|-------|
| CLAIM-12 | medium | No automated delta tracking across iterations |
| CLAIM-28 | medium | No "EXCEEDS" verdict for code that does more than claims |
| CLAIM-43 | low | No .gitignore parsing in codebase indexer |
| CLAIM-46 | medium | JSON truncation repair doesn't handle mid-object breaks |
| CLAIM-47 | medium | Code fence stripping doesn't handle nested/unusual fences |
| CLAIM-48 | high | Core lib functions not exported as npm package |
| CLAIM-51 | low | User-Agent URL unverified |

---

## Score Trajectory

```
v1 (before fixes):  ████████████████░░░  84.7%  (38 pass, 4 fail)
v2 (after fixes):   ██████████████████░  90.8%  (41 pass, 1 fail)
```

3 claims resolved. 1 FAIL remaining (medium severity). 7 PARTIALs are quality improvements, not blockers.

---

*Report generated by manual LUCID self-audit v2*
